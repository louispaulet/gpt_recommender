import{R as p,r as m,j as a,S as H,u as M}from"./index-DIL82MVa.js";var C={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},w=p.createContext&&p.createContext(C),z=["attr","size","title"];function F(e,t){if(e==null)return{};var r=R(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function R(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(n){_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _(e,t,r){return t=B(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e){var t=A(e,"string");return typeof t=="symbol"?t:t+""}function A(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N(e){return e&&e.map((t,r)=>p.createElement(t.tag,g({key:r},t.attr),N(t.child)))}function x(e){return t=>p.createElement(U,h({attr:g({},e.attr)},t),N(e.child))}function U(e){var t=r=>{var{attr:n,size:s,title:i}=e,d=F(e,z),c=s||r.size||"1em",u;return r.className&&(u=r.className),e.className&&(u=(u?u+" ":"")+e.className),p.createElement("svg",h({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,d,{className:u,style:g(g({color:e.color||r.color},r.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&p.createElement("title",null,i),e.children)};return w!==void 0?p.createElement(w.Consumer,null,r=>t(r)):t(C)}function W(e){return x({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"},child:[]}]})(e)}function I(e){return x({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(e)}function V(e){return x({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function $(e){return x({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(e)}function q(e){const r=new DOMParser().parseFromString(e,"text/html");return Array.from(r.querySelectorAll("ytd-channel-renderer")).map(s=>{const i=s.querySelector("ytd-channel-name yt-formatted-string#text"),d=s.querySelector('a.channel-link[href*="/@"]');if(i&&d){const c=d.getAttribute("href").trim(),u=c.startsWith("http")?c:`https://www.youtube.com${c}`;return{name:i.textContent.trim(),url:u}}return null}).filter(Boolean)}const Y=()=>{const[e,t]=m.useState([]),[r,n]=m.useState(!1),[s,i]=m.useState(!1),[d,c]=m.useState(""),[u,y]=m.useState(!1),v=o=>{if(!o.type.includes("html")){c("Please upload a valid HTML file.");return}c(""),i(!0);const l=new FileReader;l.onload=f=>{const T=f.target.result,j=q(T);t(j),j.length===0&&c("No channels found. Did you save the correct page?"),i(!1)},l.onerror=()=>{c("Failed to read file."),i(!1)},l.readAsText(o)},P=o=>{const l=o.target.files&&o.target.files[0];l&&v(l)},S=o=>{o.preventDefault(),y(!0)},k=o=>{o.preventDefault(),y(!1)},D=o=>{o.preventDefault(),y(!1);const l=o.dataTransfer.files&&o.dataTransfer.files[0];l&&v(l)},b=e.map(o=>`"${o.name.replace(/"/g,'""')}",${o.url}`).join(`
`),L=async()=>{try{await navigator.clipboard.writeText(b),n(!0),setTimeout(()=>n(!1),2e3)}catch{}},E=()=>{const o=new Blob([b],{type:"text/csv;charset=utf-8"}),l=URL.createObjectURL(o),f=document.createElement("a");f.href=l,f.download="subscriptions.csv",f.click(),URL.revokeObjectURL(l)};return a.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg space-y-6",children:[a.jsxs("label",{htmlFor:"subscription-file",className:"block text-lg font-medium text-gray-700 flex items-center space-x-2",children:[a.jsx($,{className:"text-primary-600"}),a.jsx("span",{children:"Upload subscriptions HTML file"})]}),a.jsx("div",{onDragOver:S,onDragLeave:k,onDrop:D,className:`p-3 border-2 border-dashed rounded-lg transition-colors ${u?"bg-primary-50 border-primary-600":"border-gray-300"}`,children:a.jsx("input",{id:"subscription-file",type:"file",accept:"text/html",onChange:P,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})}),d&&a.jsx("p",{className:"text-sm text-red-600",children:d}),s&&a.jsx("div",{className:"flex justify-center",children:a.jsx(H,{size:24})}),e.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:[e.length," channels detected. Copy the CSV below:"]}),a.jsx("textarea",{readOnly:!0,value:b,rows:Math.min(10,e.length+1),className:"w-full p-3 border border-gray-300 rounded-lg font-mono text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),a.jsxs("button",{type:"button",onClick:L,className:"w-full py-2 bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:ring-primary-300 text-white font-semibold rounded-lg transition flex items-center justify-center space-x-2",children:[a.jsx(I,{}),a.jsx("span",{children:r?"Copied!":"Copy to Clipboard"})]}),a.jsxs("button",{type:"button",onClick:E,className:"w-full py-2 bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:ring-primary-300 text-white font-semibold rounded-lg transition flex items-center justify-center space-x-2",children:[a.jsx(V,{}),a.jsx("span",{children:"Download CSV"})]})]})]})},K=()=>{const e=M();return a.jsxs("div",{className:"py-12 px-4 sm:px-6 lg:px-8 max-w-5xl mx-auto font-secondary space-y-8",children:[a.jsx("h1",{className:"text-3xl sm:text-5xl font-extrabold font-primary text-transparent bg-clip-text bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 drop-shadow-lg text-center",children:"Extract Your Subscriptions"}),a.jsx("section",{className:"p-6 bg-primary-100 rounded-lg shadow-md text-primary-900 font-medium text-lg",children:a.jsxs("ul",{className:"list-disc list-inside space-y-2 text-left",children:[a.jsx("li",{children:a.jsx("a",{href:"https://www.youtube.com/feed/channels",target:"_blank",rel:"noopener noreferrer",className:"text-primary-700 underline",children:"Open your YouTube subscriptions page"})}),a.jsxs("li",{children:["Press ",a.jsx("strong",{children:"Ctrl+S"})," and save the page as ",a.jsx("strong",{children:"HTML"}),"."]}),a.jsx("li",{children:"Upload that file below to generate a CSV of your channels."})]})}),a.jsx(Y,{}),a.jsxs("button",{onClick:()=>e("/"),className:"mt-8 w-full py-4 text-white font-bold text-xl rounded-lg bg-red-600 hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[a.jsx(W,{size:24}),"Get back to youtube recomender"]})]})};export{K as default};
